(window.webpackJsonp=window.webpackJsonp||[]).push([[21,3],{456:function(t,e,n){t.exports=n.p+"img/like.c412cba.png"},457:function(t,e,n){t.exports=n.p+"img/user.0d14c69.png"},462:function(t,e,n){t.exports=n.p+"img/bookmark.2ddc6ff.png"},463:function(t,e,n){t.exports=n.p+"img/comment.5dd0968.png"},464:function(t,e,n){t.exports=n.p+"img/send.8698d16.png"},499:function(t,e,n){"use strict";n.r(e);var r={},o=n(19),component=Object(o.a)(r,(function(){this._self._c;return this._m(0)}),[function(){var t=this._self._c;return t("div",{},[t("div",{staticClass:"rounded overflow-hidden shadow-lg animate-pulse"},[t("div",{staticClass:"bg-gray-200 h-72"})])])}],!1,null,null,null);e.default=component.exports},534:function(t,e,n){"use strict";n.r(e);n(22),n(35),n(42);var r,o=[function(){var t=this._self._c;return t("div",{},[t("img",{staticClass:"w-6 h-6",attrs:{src:n(457)}})])},function(){var t=this._self._c;return t("p",{staticClass:"flex items-center gap-x-2"},[t("img",{staticClass:"h-5 w-5 cursor-pointer",attrs:{src:n(462),alt:""}})])},function(){var t=this._self._c;return t("p",{staticClass:"flex items-center gap-x-2"},[t("img",{staticClass:"h-5 w-5 cursor-pointer",attrs:{src:n(464),alt:""}})])},function(){var t=this._self._c;return t("div",{},[t("img",{staticClass:"mb-2 w-6 h-6",attrs:{src:n(457)}})])}],c=(n(49),n(65),n(43),n(66),n(5)),l=n(34),m=(n(36),n(59),n(60),n(82),n(81),n(39),n(16),n(122)),d=n(41),v={headers:{Authorization:"Token "+(null===(r=JSON.parse(window.localStorage.getItem("user")))||void 0===r?void 0:r.token)}},f=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("https://geziwmna3v.us-west-2.awsapprunner.com/personal-info/",v);case 2:return n=t.sent,t.abrupt("return",400===n.status||500===n.status?n.message:n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(l.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={components:{},data:function(){return Object(l.a)(Object(l.a)(Object(l.a)({processing:!1,processing_reply:!1,communityIdUniqueKey:"",replies:{},user:null,userGroups:[],comparismArray:[],communityForm:{name:"",description:""},form:{content:""},processingJoining:!1,errorMessage:"",processingCommunity:!1,loadingCommunities:!1,loadingPosts:!1,communitiesGroups:[],posts:[]},"processing",!1),"editorContent","<html>What’s on your Mind?</html>"),"content","<html>What’s on your Mind?</html>")},head:{title:"Medinize Community | Communities",meta:[{hid:"description",name:"description",content:"Comminities"}]},computed:{isCommuniesformEmpty:function(){return!(!this.communityForm.name||!this.communityForm.description)},newArray:function(){var t=this;return this.communitiesGroups.map((function(e){return t.userGroups.includes(e.name)?h(h({},e),{},{visibility:!1}):h(h({},e),{},{visibility:!0})}))}},mounted:function(){this.init(),this.loadUser(),this.user=window.localStorage.getItem("user"),null===this.user&&this.$router.push("/")},methods:{createPost:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.processing=!0,e.prev=1,e.next=4,Object(m.b)(t.form);case 4:t.processing=!1,t.loadPosts(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:return e.prev=10,t.processing=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[1,8,10,13]])})))()},init:function(){this.loadCommunities(),this.loadPosts(),this.loadUserInfo()},loadCommunities:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingCommunities=!0,e.prev=1,e.next=4,Object(m.c)();case 4:r=e.sent,t.communitiesGroups=null==r||null===(n=r.data)||void 0===n?void 0:n.community_groups,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,t.loadingCommunities=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})))()},loadPosts:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingPosts=!0,e.prev=1,e.next=4,Object(m.d)();case 4:r=e.sent,t.posts=null==r||null===(n=r.data)||void 0===n?void 0:n.community_groups,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),e.t0.response&&t.$toastr.e("".concat(null===e.t0||void 0===e.t0||null===(o=e.t0.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.name[0])),"Network Error"===e.t0.message&&(t.errorMessage=e.t0.message,t.$toastr.e("Please check your internet connectivity"));case 12:return e.prev=12,t.loadingPosts=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))()},handleCreateCommunity:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.processingCommunity=!0,e.prev=1,c={name:null===(n=t.communityForm)||void 0===n?void 0:n.name.toUpperCase(),description:null===(r=t.communityForm)||void 0===r?void 0:r.description},e.next=5,Object(m.a)(c);case 5:t.processingCommunity=!1,t.loadCommunities(),t.$toastr.s("Community Group ".concat(null===(o=t.communityForm)||void 0===o?void 0:o.name," was created successfully")),t.$bvModal.hide("createCommunity"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response&&t.$toastr.e("".concat(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.name[0])),"Network Error"===e.t0.message&&(t.errorMessage=e.t0.message,t.$toastr.e("Please check your internt connectivity"));case 15:return e.prev=15,t.processingCommunity=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,11,15,18]])})))()},formatTimeElapsed:function(t){var e=new Date(t),n=new Date-e,r=Math.floor(n/1e3),o=Math.floor(r/60),c=Math.floor(o/60),l=Math.floor(c/24);return 0===l?0===c?0===o?"Just now":"".concat(o," minute").concat(o>1?"s":""," ago"):"".concat(c," hour").concat(c>1?"s":""," ago"):1===l?"Yesterday":"".concat(l," day").concat(l>1?"s":""," ago")},joinCommunity:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.processingJoining=!0,n.prev=1,r={group_name:t.name.toLowerCase()},n.next=5,Object(m.f)(r);case 5:o=n.sent,e.$toastr.s("".concat(o.data.message)),e.processingJoining=!1,e.loadCommunities(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),n.t0.response&&e.$toastr.e("".concat(null===n.t0||void 0===n.t0||null===(c=n.t0.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.error));case 14:return n.prev=14,e.processingJoining=!1,n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})))()},viewCommunity:function(t){this.$router.push("/communities/".concat(t.unique_id))},loadUser:function(){var t,e=JSON.parse(localStorage.getItem("user")),n=null==e||null===(t=e.groups)||void 0===t?void 0:t.split(",");this.userGroups=n},loadUserInfo:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingCommunities=!0,e.prev=1,e.next=4,f();case 4:n=e.sent,console.log(n,"response"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}}),e,null,[[1,8,11,13]])})))()},replyToPost:function(t){var e=this;this.processing_reply=!0;var n=this.replies[t];if(n){var r={content:n};Object(m.e)(t,r).then((function(){e.$toastr.s("Reply was saved successfully.")})).catch((function(t){e.$toastr.e(t)})).finally((function(){e.replies[t]="",e.processing_reply=!1}))}else this.$toastr.w("Reply content cannot be empty")}}},w=n(19),component=Object(w.a)(C,(function(){var t,e,r=this,o=r._self._c;return o("main",[o("section",{staticClass:"pb-20"},[o("section",{staticClass:"lg:flex items-start gap-x-8 mt-10 space-y-20 md:space-y-0"},[o("div",{staticClass:"lg:w-8/12 space-y-6"},[o("div",{staticClass:"overflow-y-auto space-y-6 h-[550px]"},[r.posts.length?o("div",{staticClass:"space-y-6 w-full"},r._l(r.posts,(function(t,i){return o("div",{key:i,staticClass:"rounded-md bg-white flex space-x-6 w-full"},[o("div",{staticClass:"w-full space-y-6"},[o("div",{staticClass:"space-y-10"},r._l(t.posts,(function(e,c){return o("div",{key:c,staticClass:"text font-light w-full space-y-4 border border-green-200 py-3 px-8"},[o("div",{staticClass:"rounded-md"},[r._m(0,!0),r._v(" "),o("p",{staticClass:"font-semibold mt-3 text-[1.3rem]"},[r._v("\n                        "+r._s(e.content)+"\n                      ")]),r._v(" "),o("div",{staticClass:"flex justify-items items-center space-x-2"},[o("div",{staticClass:"border rounded-[50%] h-3 w-3 bg-orange-500"}),r._v(" "),o("small",{staticClass:"font-regular text-[.7rem]"},[r._v(r._s(t.name))])]),r._v(" "),o("div",{staticClass:"flex items-center gap-x-6 justify-end mt-4"},[e.replies?o("div",{staticClass:"flex items-center gap-x-2 cursor-pointer",attrs:{id:"reply-count"}},[o("p",{staticClass:"flex items-center gap-x-2"},[r._v("\n                            "+r._s(e.replies.length)+" "),o("img",{staticClass:"h-6 w-6 cursor-pointer",attrs:{src:n(463),alt:""}})])]):r._e(),r._v(" "),o("p",{staticClass:"flex items-center gap-x-2"},[r._v("\n                          "+r._s(e.likes)+" "),o("img",{staticClass:"h-5 w-5 cursor-pointer",attrs:{src:n(456),alt:""}})]),r._v(" "),r._m(1,!0),r._v(" "),r._m(2,!0)])]),r._v(" "),r._l(e.replies,(function(t,e){return o("div",{key:e,staticClass:"rounded-md border-[0.4px] p-3",attrs:{id:"replies"}},[r._m(3,!0),r._v(" "),o("p",{staticClass:"text-gray-900"},[r._v(r._s(t.content))]),r._v(" "),o("p",{staticClass:"text-sm flex justify-end items-end"},[r._v("\n                        "+r._s(r.formatTimeElapsed(t.created_at))+"\n                      ")])])})),r._v(" "),o("div",{staticClass:"w-[100%] flex flex-row justify-between items-center"},[o("input",{directives:[{name:"model",rawName:"v-model",value:r.replies[e.id],expression:"replies[itm.id]"}],staticClass:"w-[73%] border outline-none w-full py-2.5 rounded-tl-md rounded-bl-md px-3",attrs:{type:"text",placeholder:"Type a reply"},domProps:{value:r.replies[e.id]},on:{input:function(t){t.target.composing||r.$set(r.replies,e.id,t.target.value)}}}),r._v(" "),o("button",{staticClass:"w-[20%] bg-green-600 text-white rounded-tr-md rounded-br-md text-sm py-[0.8rem] px-3",attrs:{disabled:r.processing},on:{click:function(t){return r.replyToPost(e.id)}}},[r._v("\n                        "+r._s(r.processing_reply?"loading":"Reply")+"\n                      ")])])],2)})),0)])])})),0):"Network Error"===r.errorMessage?o("div",{staticClass:"grid place-content-center place-items-center h-48 w-full"},[o("p",[r._v("No Communities available")])]):o("div",{staticClass:"p-6"},[o("api-loader")],1)])]),r._v(" "),o("div",{staticClass:"rounded-md bg-white border lg:w-4/12 space-y-6"},[o("div",{staticClass:"flex justify-between items-center px-4 pt-4"},[o("h1",{staticClass:"text-lg tracking-wider"},[r._v("\n            Explore  Communities\n          ")]),r._v(" "),null!==(t=r.user)&&void 0!==t&&t.is_staff||null!==(e=r.user)&&void 0!==e&&e.is_superuser?o("div",[o("button",{staticClass:"bg-yellow-700 py-2.5 md:px-4 px-3 text-sm text-white rounded-md",on:{click:function(t){return r.$bvModal.show("createCommunity")}}},[r._v("\n              Create Community\n            ")])]):r._e()]),r._v(" "),o("div",{staticClass:"overflow-y-auto"},[r.communitiesGroups.length?o("div",{staticClass:"h-[460px]"},r._l(r.communitiesGroups,(function(t,e){return o("div",{key:e,staticClass:"flex border-t justify-between items-center p-6 border-b"},[o("div",[o("h3",{staticClass:"text-sm font-bold"},[r._v("\n                  "+r._s(null==t?void 0:t.name)+"\n                ")]),r._v(" "),o("h3",{staticClass:"text-sm leading-relaxed font-light w-10/12"},[r._v("\n                  "+r._s(null==t?void 0:t.description)+"\n                ")]),r._v(" "),t.visibility?o("button",{staticClass:"py-2 rounded-md text-green-500 font-medium text-sm",on:{click:function(e){return r.joinCommunity(t)}}},[r._v("\n                  "+r._s(r.processingJoining?"processing..":"Join Community")+"\n                ")]):r._e()]),r._v(" "),o("div",[o("nuxt-link",{attrs:{to:"/dashboard/communities/".concat(t.unique_id)}},[o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"29",height:"29",viewBox:"0 0 24 24",fill:"none",stroke:"#000000","stroke-wid7h":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[o("path",{attrs:{d:"M9 18l6-6-6-6"}})])])],1)])})),0):"Network Error"===r.errorMessage?o("div",{staticClass:"grid place-content-center place-items-center h-48 w-full"},[o("p",[r._v("No Communities available")])]):o("div",{staticClass:"p-6"},[o("api-loader")],1)])])])]),r._v(" "),o("b-modal",{attrs:{id:"createCommunity","hide-footer":"","hide-header":""}},[o("main",{},[o("div",{staticClass:"max-w-xl lg:max-w-3xl"},[o("a",{staticClass:"block text-blue-600",attrs:{href:"/"}},[o("span",{staticClass:"sr-only"},[r._v("Home")]),r._v(" "),o("img",{attrs:{src:n(175),alt:"logout icon"}})]),r._v(" "),o("p",{staticClass:"mt-4 leading-relaxed text-gray-500"},[r._v("\n          Please Enter The Community namme you wish to create\n        ")]),r._v(" "),o("form",{staticClass:"w-full space-y-6 pb-6",on:{submit:function(t){return t.preventDefault(),r.handleCreateCommunity.apply(null,arguments)}}},[o("div",{staticClass:"w-full"},[o("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"Email"}},[r._v("\n              Community Name\n            ")]),r._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:r.communityForm.name,expression:"communityForm.name"}],staticClass:"mt-1 w-full rounded-md py-3 px-3 outline-none border border-gray-200 bg-white text-sm text-gray-700",attrs:{id:"name",type:"text",placeholder:"Enter Community name",name:"name"},domProps:{value:r.communityForm.name},on:{input:function(t){t.target.composing||r.$set(r.communityForm,"name",t.target.value)}}})]),r._v(" "),o("div",{staticClass:"w-full"},[o("label",{staticClass:"block text-sm font-medium text-gray-700",attrs:{for:"description"}},[r._v("\n              Community description\n            ")]),r._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:r.communityForm.description,expression:"communityForm.description"}],staticClass:"mt-1 w-full rounded-md py-3 px-3 outline-none border border-gray-200 bg-white text-sm text-gray-700 resize-none",attrs:{id:"description",type:"text",placeholder:"Describe the community",name:"description"},domProps:{value:r.communityForm.description},on:{input:function(t){t.target.composing||r.$set(r.communityForm,"description",t.target.value)}}})]),r._v(" "),o("div",{staticClass:"w-full"},[o("button",{staticClass:"w-full py-2.5 rounded-md text-white bg-yellow-900",class:[!r.isCommuniesformEmpty||r.processingCommunity?"opacity-25 cursor-not-allowed":""],attrs:{type:"submit",disabled:!r.isCommuniesformEmpty||r.processingCommunity}},[r._v("\n              "+r._s(r.processingCommunity?"processing...":" Proceed")+"\n            ")])])])])])])],1)}),o,!1,null,null,null);e.default=component.exports;installComponents(component,{ApiLoader:n(499).default})}}]);